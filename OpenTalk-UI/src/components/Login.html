<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>Aetherium | 符文纪元</title>
    <meta name="description" content="Aetherium 符文纪元：融合古神美学与现代极简风格的世界观站点，内含登录与注册页面。" />
    <style>
        :root{
            --bg-0: #0b0f14;
            --bg-1: #0f1420;
            --bg-2: #101826;
            --txt: #E6EDF3;
            --muted: #9FB0C3;
            --accent: #7CD6FF;
            --accent-2: #B195FF;
            --accent-3: #4DF1C3;
            --danger: #ff6b6b;
            --glass: rgba(255,255,255,0.06);
            --glass-strong: rgba(255,255,255,0.12);
            --border: rgba(255,255,255,0.12);
            --shadow: 0 8px 30px rgba(0,0,0,0.35);
            --radius-xl: 22px;
            --radius-lg: 16px;
            --radius-md: 12px;
            --radius-sm: 10px;
        }

        /* 基础排版，Apple 系极简 */
        html,body{
            height:100%;
            background: radial-gradient(1200px 800px at 70% -10%, #172038 0%, transparent 60%),
            radial-gradient(900px 600px at 10% 10%, #1a1f2a 0%, transparent 60%),
            linear-gradient(180deg, var(--bg-1), var(--bg-0));
            color: var(--txt);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft Yahei", "Noto Sans CJK SC", sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        *{ box-sizing: border-box; }
        a{ color: var(--accent); text-decoration: none; }
        a:hover{ opacity: .9; }
        .container{
            width: min(1120px, 92vw);
            margin: 0 auto;
            padding: 20px 0 80px;
        }

        /* 星空与符文粒子层 */
        .cosmos{
            position: fixed; inset:0; z-index: -2;
            background:
                    radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,0.24) 0, transparent 100%),
                    radial-gradient(1.5px 1.5px at 75% 12%, rgba(255,255,255,0.16) 0, transparent 100%),
                    radial-gradient(1.5px 1.5px at 40% 65%, rgba(255,255,255,0.14) 0, transparent 100%),
                    radial-gradient(2px 2px at 85% 80%, rgba(255,255,255,0.18) 0, transparent 100%);
            filter: drop-shadow(0 0 6px rgba(124,214,255,0.15));
            pointer-events: none;
            animation: twinkle 8s ease-in-out infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: .6; transform: translateY(0); }
            100% { opacity: .9; transform: translateY(-6px); }
        }

        /* 顶部导航，Apple 导航风格 + 玻璃态 */
        .nav{
            position: sticky; top: 0; z-index: 50;
            backdrop-filter: saturate(140%) blur(18px);
            background: linear-gradient(180deg, rgba(10,12,16,0.6), rgba(10,12,16,0.35));
            border-bottom: 1px solid var(--border);
        }
        .nav-inner{
            width: min(1120px, 92vw);
            margin: 0 auto;
            display:flex; align-items:center; justify-content:space-between;
            padding: 14px 0;
        }
        .brand{
            display:flex; align-items:center; gap:10px;
            font-weight:700; letter-spacing:.3px; font-size: 18px;
        }
        .brand svg{ width:24px; height:24px; }
        .nav-links{
            display:flex; align-items:center; gap: 18px;
        }
        .nav-links a{
            color: var(--txt); opacity:.9; padding:8px 12px; border-radius: 12px;
        }
        .nav-links a.router-link-active{
            background: linear-gradient(135deg, rgba(124,214,255,.18), rgba(177,149,255,.18));
            border: 1px solid rgba(124,214,255,.22);
        }
        .nav-cta{
            display:flex; align-items:center; gap:10px;
        }
        .btn{
            appearance: none; border: none; outline: none; cursor: pointer;
            padding: 12px 18px; border-radius: 999px; font-weight: 600;
            color: #0b0f14; background: linear-gradient(135deg, var(--accent), var(--accent-2));
            box-shadow: 0 10px 24px rgba(124,214,255,0.28), inset 0 1px 0 rgba(255,255,255,0.25);
            transition: transform .18s ease, box-shadow .18s ease, opacity .18s;
        }
        .btn:hover{ transform: translateY(-1px); box-shadow: 0 14px 30px rgba(124,214,255,0.35), inset 0 1px 0 rgba(255,255,255,0.25); }
        .btn-ghost{
            background: transparent; color: var(--txt); border: 1px solid var(--border); box-shadow: none;
        }
        .btn-ghost:hover{ background: rgba(255,255,255,0.06); }

        /* Hero 区块 */
        .hero{
            display:grid; grid-template-columns: 1.1fr .9fr; gap: 28px; align-items: center;
            padding: 36px 0 24px;
        }
        .headline{
            font-size: clamp(28px, 4.3vw, 56px);
            line-height: 1.05; font-weight: 800;
            letter-spacing: -0.02em;
            background: linear-gradient(92deg, #EAF7FF 0%, #E9E3FF 55%, #E5FFF5 100%);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            text-shadow: 0 20px 50px rgba(124,214,255,0.18);
        }
        .sub{
            margin-top: 14px; color: var(--muted); font-size: clamp(14px, 1.8vw, 18px);
        }
        .hero-cta{ margin-top: 22px; display:flex; gap:12px; flex-wrap: wrap; }
        .glass{
            background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
            border: 1px solid var(--border); border-radius: var(--radius-xl);
            box-shadow: var(--shadow);
        }
        .panel{
            padding: 20px; position: relative; overflow: hidden;
        }
        .panel .runes{
            position:absolute; inset:0; pointer-events:none; opacity:.16;
            background:
                    radial-gradient(120px 80px at 15% 30%, rgba(124,214,255,.18), transparent 60%),
                    radial-gradient(100px 90px at 85% 70%, rgba(177,149,255,.18), transparent 60%),
                    radial-gradient(80px 60px at 40% 85%, rgba(77,241,195,.14), transparent 70%);
            mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox=\\'0 0 200 200\\'><g fill=\\'white\\' opacity=\\'0.8\\'><text x=\\'10\\' y=\\'40\\' font-size=\\'36\\'>ᚠᚢᚦᚨᚱ</text><text x=\\'60\\' y=\\'100\\' font-size=\\'44\\'>卍 玄 霊</text><text x=\\'20\\' y=\\'170\\' font-size=\\'32\\'>☽☥⚚</text></g></svg>');
            mask-size: contain; mask-repeat: no-repeat; mask-position:center;
            }

            /* 表单卡片 */
            .auth-card{
            padding: 22px; border-radius: var(--radius-xl);
            display: grid; gap: 14px;
        }
        .field{
            display:flex; flex-direction: column; gap: 8px;
        }
        .field label{ color: var(--muted); font-size: 13px; }
        .input{
            background: rgba(255,255,255,0.04);
            border: 1px solid var(--border);
            border-radius: 14px; color: var(--txt);
            padding: 14px 14px; outline: none;
            transition: border .2s ease, box-shadow .2s ease;
        }
        .input:focus{
            border-color: rgba(124,214,255,.5);
            box-shadow: 0 0 0 6px rgba(124,214,255,.12);
        }
        .hint{ color: var(--muted); font-size: 12px; }
        .error{ color: var(--danger); font-size: 13px; }

        /* Lore 地图 */
        .map-wrap{
            position: relative; width: 100%; aspect-ratio: 16/10;
            border-radius: var(--radius-xl); overflow: hidden;
            border: 1px solid var(--border);
            background: radial-gradient(circle at 50% 40%, #162238 0%, #0d121b 65%);
            box-shadow: var(--shadow);
        }
        .map-wrap svg{ width: 100%; height: 100%; display: block; }
        .region{
            fill: url(#landGradient); stroke: rgba(255,255,255,0.25);
            stroke-width: 1; filter: drop-shadow(0 6px 12px rgba(0,0,0,0.5));
            transition: transform .2s ease, filter .2s ease, opacity .2s ease;
            opacity: .95;
        }
        .region:hover{ filter: drop-shadow(0 10px 16px rgba(124,214,255,0.25)); }
        .region.active{ stroke: #7CD6FF; stroke-width: 2; opacity: 1; }

        .lore-panel{
            margin-top: 16px; display:grid; gap: 10px;
            padding: 18px; border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
        }

        /* 卡片栅格 */
        .grid{
            display:grid; gap: 16px;
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .card{
            border: 1px solid var(--border); border-radius: var(--radius-lg);
            padding: 16px; background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
            box-shadow: var(--shadow);
        }
        .tag{
            font-size: 12px; color: var(--muted);
            padding: 6px 10px; border:1px solid var(--border);
            border-radius: 999px; display:inline-flex; gap:6px; align-items:center;
            background: rgba(255,255,255,0.04);
        }

        /* 页脚 */
        .footer{
            margin-top: 60px; padding: 28px 0; color: var(--muted);
            border-top: 1px solid var(--border);
            text-align: center; font-size: 13px;
        }

        /* 响应式 */
        @media (max-width: 920px){
            .hero{ grid-template-columns: 1fr; }
            .grid{ grid-template-columns: 1fr 1fr; }
            .nav-links{ display:none; }
        }
        @media (max-width: 640px){
            .grid{ grid-template-columns: 1fr; }
            .container{ width: 92vw; }
            .panel{ padding: 16px; }
            .auth-card{ padding: 16px; }
        }
    </style>
</head>
<body>
<div class="cosmos" aria-hidden="true"></div>

<!-- 符文 SVG 符号库 -->
<svg width="0" height="0" style="position:absolute">
    <defs>
        <linearGradient id="landGradient" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#2a8f8a"/>
            <stop offset="100%" stop-color="#194a5a"/>
        </linearGradient>
        <linearGradient id="textGradient" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#7CD6FF"/>
            <stop offset="50%" stop-color="#B195FF"/>
            <stop offset="100%" stop-color="#4DF1C3"/>
        </linearGradient>
        <symbol id="sigil" viewBox="0 0 100 100">
            <g stroke="currentColor" stroke-width="4" stroke-linecap="round" fill="none">
                <circle cx="50" cy="50" r="36"></circle>
                <path d="M50 14 L50 86"></path>
                <path d="M22 50 L78 50"></path>
                <path d="M30 30 L70 70"></path>
                <path d="M70 30 L30 70"></path>
            </g>
        </symbol>
        <symbol id="glyph-1" viewBox="0 0 24 24"><path d="M12 2l3 6-3 6-3-6 3-6z" fill="currentColor"/></symbol>
        <symbol id="glyph-2" viewBox="0 0 24 24"><path d="M3 12h18M12 3v18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></symbol>
        <symbol id="glyph-3" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
    </defs>
</svg>

<div id="app"></div>

<!-- Vue 3 与 Router（CDN） -->
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script src="https://unpkg.com/vue-router@4/dist/vue-router.global.prod.js"></script>

<script>
    const { createApp, reactive, computed, ref, onMounted, watch } = Vue;
    const { createRouter, createWebHashHistory, RouterLink, RouterView } = VueRouter;

    // 简易全局状态（本地存储演示用，非生产）
    const store = reactive({
        users: JSON.parse(localStorage.getItem('aether_users') || '[]'),
        token: localStorage.getItem('aether_token') || null,
        get currentUser(){
            if(!this.token) return null;
            return this.users.find(u => u.email === this.token) || null;
        },
        register({username, email, password}){
            if(this.users.some(u => u.email === email)){
                throw new Error('该邮箱已注册');
            }
            this.users.push({username, email, password, createdAt: Date.now()});
            localStorage.setItem('aether_users', JSON.stringify(this.users));
            this.token = email;
            localStorage.setItem('aether_token', email);
        },
        login({email, password}){
            const user = this.users.find(u => u.email === email && u.password === password);
            if(!user) throw new Error('邮箱或密码错误');
            this.token = email;
            localStorage.setItem('aether_token', email);
        },
        logout(){
            this.token = null;
            localStorage.removeItem('aether_token');
        }
    });

    // 布局组件
    const AppShell = {
        template: `
        <div>
          <header class="nav">
            <div class="nav-inner">
              <RouterLink to="/" class="brand" aria-label="Aetherium">
                <svg viewBox="0 0 100 100" aria-hidden="true">
                  <use href="#sigil" fill="none" stroke="url(#textGradient)"></use>
                </svg>
                <span>Aetherium · 符文纪元</span>
              </RouterLink>
              <nav class="nav-links" aria-label="主导航">
                <RouterLink to="/">首页</RouterLink>
                <RouterLink to="/lore">世界观</RouterLink>
                <RouterLink to="/codex">神话图鉴</RouterLink>
                <RouterLink v-if="authed" to="/profile">我的</RouterLink>
              </nav>
              <div class="nav-cta">
                <button v-if="authed" class="btn-ghost" @click="logout">退出</button>
                <RouterLink v-else to="/login" class="btn-ghost">登录</RouterLink>
                <RouterLink v-if="!authed" to="/register" class="btn">注册</RouterLink>
              </div>
            </div>
          </header>
          <main class="container">
            <RouterView />
          </main>
          <footer class="footer">
            <div>© {{year}} Aetherium. 以现代极简重铸上古神话。</div>
          </footer>
        </div>
      `,
        setup(){
            const authed = computed(() => !!store.currentUser);
            const year = new Date().getFullYear();
            function logout(){
                store.logout();
            }
            return { authed, year, logout }
        }
    };

    // 首页
    const HomeView = {
        template: `
        <section>
          <div class="hero">
            <div>
              <h1 class="headline">在诸界交汇之处，符文书写命运。</h1>
              <p class="sub">Aetherium 是一座由光与秘语铸就的大陆。我们以 Apple 式简洁设计，承载东方龙脉与西方符文，同织一卷可探索、可书写的新神话。</p>
              <div class="hero-cta">
                <RouterLink to="/register" class="btn">踏上旅程</RouterLink>
                <RouterLink to="/lore" class="btn-ghost">先了解世界</RouterLink>
              </div>
              <div class="panel glass" style="margin-top:18px;">
                <div class="runes"></div>
                <div style="position:relative; z-index:1; display:flex; align-items:center; gap:12px; flex-wrap: wrap;">
                  <span class="tag"><svg width="16" height="16"><use href="#glyph-1" /></svg> 符文体系</span>
                  <span class="tag"><svg width="16" height="16"><use href="#glyph-2" /></svg> 龙脉传说</span>
                  <span class="tag"><svg width="16" height="16"><use href="#glyph-3" /></svg> 星辉秘境</span>
                  <span class="tag">玻璃拟态 · 极简 · 高对比</span>
                </div>
              </div>
            </div>
            <div>
              <div class="panel glass" style="aspect-ratio: 4/3; display:grid; place-items:center;">
                <svg viewBox="0 0 100 100" width="78%" height="78%" style="color:#9edbff">
                  <use href="#sigil"></use>
                </svg>
                <div style="position:absolute; inset:0; pointer-events:none; display:grid; place-items:center;">
                  <svg width="90%" height="90%" viewBox="0 0 300 300" style="opacity:.22">
                    <defs>
                      <radialGradient id="halo" r="60%">
                        <stop offset="0%" stop-color="#7CD6FF"/>
                        <stop offset="60%" stop-color="#B195FF" stop-opacity=".7"/>
                        <stop offset="100%" stop-color="#4DF1C3" stop-opacity="0"/>
                      </radialGradient>
                    </defs>
                    <circle cx="150" cy="150" r="120" fill="url(#halo)"></circle>
                  </svg>
                </div>
              </div>
              <div class="panel glass" style="margin-top:16px;">
                <h3 style="margin:0 0 10px;">今日神谕</h3>
                <p class="hint" style="margin:0 0 8px;">从下方抽取一枚符印，窥见旅途的方向。</p>
                <div style="display:flex; gap:10px; flex-wrap:wrap;">
                  <button class="btn-ghost" @click="draw">抽一签</button>
                  <span v-if="oracle" class="tag">{{ oracle }}</span>
                </div>
              </div>
            </div>
          </div>
        </section>
      `,
        setup(){
            const oracles = [
                '风起于青岚，择高而栖。',
                '月照归途，勿负初心。',
                '龙吟于地脉，庇护行者。',
                '霜雪未融，锋芒已成。',
                '星火可燎原，微末亦可光明。',
                '以符为桥，于界与界之间。'
            ];
            const oracle = ref('');
            function draw(){
                oracle.value = oracles[Math.floor(Math.random()*oracles.length)];
            }
            return { oracle, draw }
        }
    };

    // 登录
    const LoginView = {
        template: `
        <section style="display:grid; grid-template-columns: 1fr 1fr; gap: 24px;">
          <div class="panel glass">
            <h2 class="headline" style="font-size: clamp(22px, 3.2vw, 36px);">欢迎归来，旅者</h2>
            <p class="sub">登录你的灵印，继续在 Aetherium 的编年史中书写你的篇章。</p>
            <div class="panel glass" style="margin-top:14px;">
              <p class="hint" style="margin:0;">演示环境：账号数据保存在本地浏览器的 LocalStorage 中，仅供原型体验。</p>
            </div>
          </div>
          <div class="auth-card glass">
            <div class="field">
              <label for="email">邮箱</label>
              <input id="email" class="input" v-model.trim="email" type="email" placeholder="you@aetherium.dev" autocomplete="email" />
            </div>
            <div class="field">
              <label for="pwd">密码</label>
              <div style="position:relative;">
                <input id="pwd" class="input" :type="show?'text':'password'" v-model="password" placeholder="••••••••" autocomplete="current-password" />
                <button class="btn-ghost" @click="show=!show" type="button" style="position:absolute; right:6px; top:6px; padding:8px 10px; font-size:12px;">{{ show?'隐藏':'显示' }}</button>
              </div>
            </div>
            <div class="error" v-if="err">{{ err }}</div>
            <button class="btn" @click="submit">登录</button>
            <p class="hint">还没有灵印？ <RouterLink to="/register">注册一个</RouterLink></p>
          </div>
        </section>
      `,
        setup(_, { router }){
            const email = ref('');
            const password = ref('');
            const show = ref(false);
            const err = ref('');
            function submit(){
                err.value = '';
                try{
                    store.login({email: email.value, password: password.value});
                    router.push('/profile');
                }catch(e){
                    err.value = e.message || '登录失败';
                }
            }
            return { email, password, show, err, submit }
        }
    };

    // 注册
    const RegisterView = {
        template: `
        <section style="display:grid; grid-template-columns: 1fr 1fr; gap: 24px;">
          <div class="panel glass">
            <h2 class="headline" style="font-size: clamp(22px, 3.2vw, 36px);">铸造你的灵印</h2>
            <p class="sub">一个名字，一枚符印。从此你将在诸界中拥有归属。</p>
            <div class="panel glass" style="margin-top:14px;">
              <p class="hint" style="margin:0;">建议设置 8 位以上密码。原型不做加密与找回，请勿使用真实密码。</p>
            </div>
          </div>
          <div class="auth-card glass">
            <div class="field">
              <label for="username">称号</label>
              <input id="username" class="input" v-model.trim="username" placeholder="如：星行者" autocomplete="nickname" />
            </div>
            <div class="field">
              <label for="email">邮箱</label>
              <input id="email" class="input" v-model.trim="email" type="email" placeholder="you@aetherium.dev" autocomplete="email" />
            </div>
            <div class="field">
              <label for="pwd">密码</label>
              <input id="pwd" class="input" :type="show?'text':'password'" v-model="password" placeholder="至少 8 位" autocomplete="new-password" />
            </div>
            <div class="field">
              <label for="pwd2">确认密码</label>
              <input id="pwd2" class="input" :type="show?'text':'password'" v-model="confirm" placeholder="再次输入密码" autocomplete="new-password" />
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <input id="agree" type="checkbox" v-model="agree" />
              <label for="agree" class="hint">我同意《星辉协议》</label>
              <button class="btn-ghost" type="button" @click="show=!show" style="margin-left:auto;">{{ show?'隐藏密码':'显示密码' }}</button>
            </div>
            <div class="error" v-if="err">{{ err }}</div>
            <button class="btn" @click="submit">注册</button>
            <p class="hint">已有灵印？ <RouterLink to="/login">前往登录</RouterLink></p>
          </div>
        </section>
      `,
        setup(_, { router }){
            const username = ref('');
            const email = ref('');
            const password = ref('');
            const confirm = ref('');
            const agree = ref(false);
            const show = ref(false);
            const err = ref('');
            function submit(){
                err.value = '';
                if(!username.value || !email.value || !password.value) { err.value='请完整填写信息'; return; }
                if(password.value.length < 8) { err.value='密码至少 8 位'; return; }
                if(password.value !== confirm.value) { err.value='两次输入的密码不一致'; return; }
                if(!agree.value) { err.value='请同意星辉协议'; return; }
                try{
                    store.register({username: username.value, email: email.value, password: password.value});
                    router.push('/profile');
                }catch(e){
                    err.value = e.message || '注册失败';
                }
            }
            return { username, email, password, confirm, agree, show, err, submit }
        }
    };

    // 世界观（地图 + 区域介绍）
    const LoreView = {
        template: `
        <section>
          <h2 class="headline" style="font-size: clamp(26px, 3.4vw, 42px); margin-bottom: 12px;">Aetherium · 大地六域</h2>
          <p class="sub">以符为律，以龙为骨。六域共振，诸界同鸣。</p>
          <div class="map-wrap" role="img" aria-label="符文大陆交互式地图">
            <svg viewBox="0 0 1000 620" @mouseleave="hover=''">
              <defs>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="3" result="blur"></feGaussianBlur>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- 海流与星轨 -->
              <g opacity=".18" stroke="#7CD6FF" stroke-width="1" fill="none">
                <path d="M-20 540 C 200 500, 300 520, 520 540 S 940 580, 1100 560" />
                <path d="M-20 420 C 160 420, 340 380, 520 420 S 880 500, 1100 480" />
              </g>
              <!-- 大陆块（抽象形） -->
              <g>
                <path class="region" :class="{active: active==='黎明高原'}" @mouseenter="hover='黎明高原'" @click="select('黎明高原')"
                  d="M160,180 C260,120 380,120 460,190 C520,240 520,320 460,360 C380,410 240,390 180,330 C120,270 100,220 160,180 Z"></path>
                <path class="region" :class="{active: active==='月影群岛'}" @mouseenter="hover='月影群岛'" @click="select('月影群岛')"
                  d="M660,120 C720,80 820,100 860,160 C900,220 860,260 800,260 C740,260 680,200 660,160 C640,120 640,140 660,120 Z"></path>
                <path class="region" :class="{active: active==='风痕荒漠'}" @mouseenter="hover='风痕荒漠'" @click="select('风痕荒漠')"
                  d="M520,260 C640,240 760,280 800,340 C840,400 780,440 640,460 C560,470 500,430 500,380 C500,320 460,280 520,260 Z"></path>
                <path class="region" :class="{active: active==='深根雨林'}" @mouseenter="hover='深根雨林'" @click="select('深根雨林')"
                  d="M260,380 C320,360 420,380 460,440 C500,500 420,560 340,560 C280,560 200,520 200,460 C200,420 220,400 260,380 Z"></path>
                <path class="region" :class="{active: active==='霜冠群山'}" @mouseenter="hover='霜冠群山'" @click="select('霜冠群山')"
                  d="M520,80 C580,60 640,60 700,90 C760,120 720,160 660,170 C600,180 540,160 520,140 C500,120 500,100 520,80 Z"></path>
                <path class="region" :class="{active: active==='余烬裂谷'}" @mouseenter="hover='余烬裂谷'" @click="select('余烬裂谷')"
                  d="M840,380 C880,360 940,380 960,420 C980,460 940,500 900,500 C860,500 820,480 820,440 C820,410 820,400 840,380 Z"></path>
              </g>
              <!-- 浮动符文 -->
              <g opacity=".22" stroke="#B195FF" stroke-width="1" fill="none" style="animation: float 6s ease-in-out infinite alternate;">
                <circle cx="130" cy="120" r="18"></circle>
                <path d="M880 120 l14 24 l-28 0 z"></path>
              </g>
            </svg>
          </div>
          <div class="lore-panel">
            <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
              <h3 style="margin:0; font-weight:700;">{{ title }}</h3>
              <span class="tag">当前：{{ hover || '—' }}</span>
            </div>
            <p style="margin:6px 0 0; color: var(--muted); white-space: pre-line;">{{ desc }}</p>
          </div>

          <div style="margin-top: 24px;">
            <h3 style="margin:0 0 10px;">区域纲要</h3>
            <div class="grid">
              <div class="card" v-for="item in regions" :key="item.name">
                <div style="display:flex; align-items:center; justify-content:space-between;">
                  <strong>{{ item.name }}</strong>
                  <span class="tag">{{ item.aspect }}</span>
                </div>
                <p class="hint" style="margin:8px 0 0;">{{ item.brief }}</p>
              </div>
            </div>
          </div>
        </section>
      `,
        setup(){
            const lore = {
                '黎明高原': {
                    title: '黎明高原 · 日矛之座',
                    desc: '当第一缕曙光触地，石阵中便响起古老的和弦。\n牧行者以日矛定时序，符刻于石林，驱散永夜。',
                    brief: '光与秩序之域', aspect: '太阳/秩序'
                },
                '月影群岛': {
                    title: '月影群岛 · 银潮与回声',
                    desc: '潮起之时有影鱼跃空，拖拽月光如丝。\n海女以贝纹占卜，预知航路与离散。',
                    brief: '海与梦境之域', aspect: '月/海'
                },
                '风痕荒漠': {
                    title: '风痕荒漠 · 长风雕骨',
                    desc: '流沙下埋葬着上古龙骨，风过其上鸣若琴。\n行商以风簿记星轨，敢与烈日论速度。',
                    brief: '风与商道之域', aspect: '风/商旅'
                },
                '深根雨林': {
                    title: '深根雨林 · 木心之脉',
                    desc: '树冠之上云雾成湖，藤蔓垂落如钟。\n巫语者聆听菌丝，借其传信千里之外。',
                    brief: '生命与回春之域', aspect: '林/生命'
                },
                '霜冠群山': {
                    title: '霜冠群山 · 霜铁与回火',
                    desc: '雪线之上，铁脉裸露发出极光。\n铸炉以龙息回火，成兵器亦可成诗。',
                    brief: '寒与锻造之域', aspect: '冰/锻造'
                },
                '余烬裂谷': {
                    title: '余烬裂谷 · 灰烬新生',
                    desc: '火山腹地孕育黑曜之歌。\n驭炎者以灰为墨，于岩壁书写复生的誓言。',
                    brief: '火与涅槃之域', aspect: '火/新生'
                },
            };
            const regions = Object.entries(lore).map(([name, v]) => ({name, brief: v.brief, aspect: v.aspect}));
            const active = ref('黎明高原');
            const hover = ref('');
            const title = computed(() => lore[active.value].title);
            const desc  = computed(() => lore[active.value].desc);
            function select(name){ active.value = name; }
            return { regions, active, hover, title, desc, select }
        }
    };

    // 图鉴
    const CodexView = {
        template: `
        <section>
          <h2 class="headline" style="font-size: clamp(26px, 3.2vw, 40px); margin-bottom: 12px;">神话图鉴 · 符灵与古神</h2>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom: 14px;">
            <input class="input" v-model.trim="q" placeholder="搜索：名称/权柄/出处..." style="flex: 1 1 260px;">
            <span class="tag">收录：{{ filtered.length }}</span>
          </div>
          <div class="grid">
            <article class="card" v-for="e in filtered" :key="e.name">
              <div style="display:flex; align-items:center; justify-content:space-between;">
                <strong style="font-size: 16px;">{{ e.name }}</strong>
                <span class="tag">{{ e.domain }}</span>
              </div>
              <p class="hint" style="margin:8px 0 10px;">权柄：{{ e.aspect }}</p>
              <p style="margin:0; color: var(--muted);">{{ e.brief }}</p>
            </article>
          </div>
        </section>
      `,
        setup(){
            const entries = ref([
                { name: '熵书使', domain: '西系·符灵', aspect: '知识/记录', brief: '携行可自书写的熵页，其字能吞噬谎言。' },
                { name: '玄龙', domain: '东系·古神', aspect: '龙脉/庇佑', brief: '鳞若山脊，息成云雨，巡游于地脉之上。' },
                { name: '潮梦女', domain: '西系·海祇', aspect: '潮汐/梦境', brief: '以贝纹织梦，送迷失者归岸。' },
                { name: '烬冠者', domain: '西系·炎灵', aspect: '火/新生', brief: '头戴灰烬王冠，于废墟中唤醒火种。' },
                { name: '木心巫', domain: '东系·林祖', aspect: '生命/共鸣', brief: '聆听菌丝网的低语，修复折断的枝枒。' },
                { name: '霜炉匠', domain: '北系·锻灵', aspect: '寒铁/锻造', brief: '以极寒回火，使钢铁歌唱。' },
            ]);
            const q = ref('');
            const filtered = computed(() => {
                const s = q.value.trim();
                if(!s) return entries.value;
                return entries.value.filter(e =>
                    [e.name, e.domain, e.aspect, e.brief].some(t => t.toLowerCase().includes(s.toLowerCase()))
                );
            });
            return { q, filtered }
        }
    };

    // 个人页（需登录）
    const ProfileView = {
        template: `
        <section>
          <h2 class="headline" style="font-size: clamp(24px, 3vw, 36px); margin-bottom: 10px;">我的灵印</h2>
          <div class="grid">
            <div class="card" style="grid-column: span 2;">
              <div style="display:flex; align-items:center; gap:14px; flex-wrap:wrap;">
                <div style="width:64px; height:64px; border-radius:50%; display:grid; place-items:center; border:1px solid var(--border); background:rgba(255,255,255,.04);">
                  <svg viewBox="0 0 100 100" width="40" height="40" style="color:#9edbff">
                    <use href="#sigil" />
                  </svg>
                </div>
                <div>
                  <div style="font-weight:700; font-size: 18px;">{{ me.username }}</div>
                  <div class="hint">{{ me.email }}</div>
                </div>
                <span class="tag">加入于：{{ date }}</span>
              </div>
            </div>
            <div class="card">
              <strong>旅程进度</strong>
              <p class="hint">你已解锁 2/6 区域故事。</p>
              <div style="height:8px; border-radius: 8px; background: rgba(255,255,255,.06); overflow:hidden; margin-top:8px;">
                <div style="width: 34%; height:100%; background: linear-gradient(90deg, var(--accent), var(--accent-2));"></div>
              </div>
            </div>
            <div class="card">
              <strong>我的神谕</strong>
              <p class="hint">风起于青岚，择高而栖。</p>
            </div>
          </div>
        </section>
      `,
        setup(){
            const me = computed(() => store.currentUser || {username:'', email:'', createdAt: Date.now()});
            const date = computed(() => new Date(me.value.createdAt).toLocaleString());
            return { me, date }
        }
    };

    // 404
    const NotFoundView = { template: `<section><h2 class="headline" style="font-size:28px;">迷路了</h2><p class="sub">你似乎闯入了未被刻写的空白页。</p></section>` };

    // 路由
    const routes = [
        { path: '/', component: HomeView, meta: { title: 'Aetherium · 首页' } },
        { path: '/login', component: LoginView, meta: { title: '登录 · Aetherium' } },
        { path: '/register', component: RegisterView, meta: { title: '注册 · Aetherium' } },
        { path: '/lore', component: LoreView, meta: { title: '世界观 · Aetherium' } },
        { path: '/codex', component: CodexView, meta: { title: '图鉴 · Aetherium' } },
        { path: '/profile', component: ProfileView, meta: { title: '我的 · Aetherium', requiresAuth: true } },
        { path: '/:path(.*)', component: NotFoundView, meta: { title: '未找到 · Aetherium' } },
    ];
    const router = createRouter({ history: createWebHashHistory(), routes });

    router.beforeEach((to, from, next) => {
        document.title = to.meta.title || 'Aetherium';
        if(to.meta.requiresAuth && !store.currentUser) return next('/login');
        next();
    });

    // 启动
    const app = createApp(AppShell);
    app.use(router);
    app.mount('#app');
</script>
</body>
</html>